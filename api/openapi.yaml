openapi: "3.0.3"
info:
  title: CRM Platform API
  version: 0.1.0
  description: Enterprise CRM platform with metadata-driven objects and granular security.

servers:
  - url: http://localhost:8080
    description: Local development

tags:
  - name: system
    description: System health and diagnostics
  - name: metadata-objects
    description: Object definition management
  - name: metadata-fields
    description: Field definition management
  - name: security-roles
    description: User role management
  - name: security-permission-sets
    description: Permission set management
  - name: security-profiles
    description: Profile management
  - name: security-users
    description: User management
  - name: security-permissions
    description: OLS/FLS permission management

paths:
  /healthz:
    get:
      summary: Health check
      operationId: healthCheck
      tags:
        - system
      responses:
        "200":
          description: Service is healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: ok

  /api/v1/admin/metadata/objects:
    post:
      summary: Create object definition
      operationId: createObject
      tags:
        - metadata-objects
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateObjectRequest"
      responses:
        "201":
          description: Object created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ObjectResponse"
        "400":
          $ref: "#/components/responses/BadRequest"
        "409":
          $ref: "#/components/responses/Conflict"
        "500":
          $ref: "#/components/responses/InternalError"

    get:
      summary: List object definitions
      operationId: listObjects
      tags:
        - metadata-objects
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            default: 1
            minimum: 1
        - name: per_page
          in: query
          schema:
            type: integer
            default: 20
            minimum: 1
            maximum: 100
        - name: object_type
          in: query
          schema:
            type: string
            enum: [standard, custom]
      responses:
        "200":
          description: List of objects
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ObjectListResponse"
        "500":
          $ref: "#/components/responses/InternalError"

  /api/v1/admin/metadata/objects/{objectId}:
    parameters:
      - $ref: "#/components/parameters/ObjectId"

    get:
      summary: Get object definition
      operationId: getObject
      tags:
        - metadata-objects
      responses:
        "200":
          description: Object definition
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ObjectResponse"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalError"

    put:
      summary: Update object definition
      operationId: updateObject
      tags:
        - metadata-objects
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateObjectRequest"
      responses:
        "200":
          description: Object updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ObjectResponse"
        "400":
          $ref: "#/components/responses/BadRequest"
        "403":
          $ref: "#/components/responses/Forbidden"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalError"

    delete:
      summary: Delete object definition
      operationId: deleteObject
      tags:
        - metadata-objects
      responses:
        "204":
          description: Object deleted
        "403":
          $ref: "#/components/responses/Forbidden"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalError"

  /api/v1/admin/metadata/objects/{objectId}/fields:
    parameters:
      - $ref: "#/components/parameters/ObjectId"

    post:
      summary: Create field definition
      operationId: createField
      tags:
        - metadata-fields
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateFieldRequest"
      responses:
        "201":
          description: Field created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FieldResponse"
        "400":
          $ref: "#/components/responses/BadRequest"
        "404":
          $ref: "#/components/responses/NotFound"
        "409":
          $ref: "#/components/responses/Conflict"
        "500":
          $ref: "#/components/responses/InternalError"

    get:
      summary: List field definitions for object
      operationId: listFields
      tags:
        - metadata-fields
      responses:
        "200":
          description: List of fields
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FieldListResponse"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalError"

  /api/v1/admin/metadata/objects/{objectId}/fields/{fieldId}:
    parameters:
      - $ref: "#/components/parameters/ObjectId"
      - $ref: "#/components/parameters/FieldId"

    get:
      summary: Get field definition
      operationId: getField
      tags:
        - metadata-fields
      responses:
        "200":
          description: Field definition
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FieldResponse"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalError"

    put:
      summary: Update field definition
      operationId: updateField
      tags:
        - metadata-fields
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateFieldRequest"
      responses:
        "200":
          description: Field updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FieldResponse"
        "400":
          $ref: "#/components/responses/BadRequest"
        "403":
          $ref: "#/components/responses/Forbidden"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalError"

    delete:
      summary: Delete field definition
      operationId: deleteField
      tags:
        - metadata-fields
      responses:
        "204":
          description: Field deleted
        "403":
          $ref: "#/components/responses/Forbidden"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalError"

  # --- Security: Roles ---

  /api/v1/admin/security/roles:
    post:
      summary: Create user role
      operationId: createRole
      tags: [security-roles]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateRoleRequest"
      responses:
        "201":
          description: Role created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DataResponse"
        "400":
          $ref: "#/components/responses/BadRequest"
        "409":
          $ref: "#/components/responses/Conflict"

    get:
      summary: List user roles
      operationId: listRoles
      tags: [security-roles]
      parameters:
        - $ref: "#/components/parameters/Page"
        - $ref: "#/components/parameters/PerPage"
      responses:
        "200":
          description: List of roles
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedDataResponse"

  /api/v1/admin/security/roles/{id}:
    parameters:
      - $ref: "#/components/parameters/ResourceId"
    get:
      summary: Get user role
      operationId: getRole
      tags: [security-roles]
      responses:
        "200":
          description: Role
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DataResponse"
        "404":
          $ref: "#/components/responses/NotFound"
    put:
      summary: Update user role
      operationId: updateRole
      tags: [security-roles]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateRoleRequest"
      responses:
        "200":
          description: Role updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DataResponse"
        "400":
          $ref: "#/components/responses/BadRequest"
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      summary: Delete user role
      operationId: deleteRole
      tags: [security-roles]
      responses:
        "204":
          description: Role deleted
        "404":
          $ref: "#/components/responses/NotFound"

  # --- Security: Permission Sets ---

  /api/v1/admin/security/permission-sets:
    post:
      summary: Create permission set
      operationId: createPermissionSet
      tags: [security-permission-sets]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreatePermissionSetRequest"
      responses:
        "201":
          description: Permission set created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DataResponse"
        "400":
          $ref: "#/components/responses/BadRequest"
        "409":
          $ref: "#/components/responses/Conflict"

    get:
      summary: List permission sets
      operationId: listPermissionSets
      tags: [security-permission-sets]
      parameters:
        - $ref: "#/components/parameters/Page"
        - $ref: "#/components/parameters/PerPage"
      responses:
        "200":
          description: List of permission sets
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedDataResponse"

  /api/v1/admin/security/permission-sets/{id}:
    parameters:
      - $ref: "#/components/parameters/ResourceId"
    get:
      summary: Get permission set
      operationId: getPermissionSet
      tags: [security-permission-sets]
      responses:
        "200":
          description: Permission set
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DataResponse"
        "404":
          $ref: "#/components/responses/NotFound"
    put:
      summary: Update permission set
      operationId: updatePermissionSet
      tags: [security-permission-sets]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdatePermissionSetRequest"
      responses:
        "200":
          description: Permission set updated
        "400":
          $ref: "#/components/responses/BadRequest"
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      summary: Delete permission set
      operationId: deletePermissionSet
      tags: [security-permission-sets]
      responses:
        "204":
          description: Permission set deleted
        "404":
          $ref: "#/components/responses/NotFound"

  # --- Security: Profiles ---

  /api/v1/admin/security/profiles:
    post:
      summary: Create profile
      operationId: createProfile
      tags: [security-profiles]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateProfileRequest"
      responses:
        "201":
          description: Profile created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DataResponse"
        "400":
          $ref: "#/components/responses/BadRequest"
        "409":
          $ref: "#/components/responses/Conflict"
    get:
      summary: List profiles
      operationId: listProfiles
      tags: [security-profiles]
      parameters:
        - $ref: "#/components/parameters/Page"
        - $ref: "#/components/parameters/PerPage"
      responses:
        "200":
          description: List of profiles

  /api/v1/admin/security/profiles/{id}:
    parameters:
      - $ref: "#/components/parameters/ResourceId"
    get:
      summary: Get profile
      operationId: getProfile
      tags: [security-profiles]
      responses:
        "200":
          description: Profile
        "404":
          $ref: "#/components/responses/NotFound"
    put:
      summary: Update profile
      operationId: updateProfile
      tags: [security-profiles]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateProfileRequest"
      responses:
        "200":
          description: Profile updated
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      summary: Delete profile
      operationId: deleteProfile
      tags: [security-profiles]
      responses:
        "204":
          description: Profile deleted
        "404":
          $ref: "#/components/responses/NotFound"

  # --- Security: Users ---

  /api/v1/admin/security/users:
    post:
      summary: Create user
      operationId: createUser
      tags: [security-users]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateUserRequest"
      responses:
        "201":
          description: User created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DataResponse"
        "400":
          $ref: "#/components/responses/BadRequest"
        "409":
          $ref: "#/components/responses/Conflict"
    get:
      summary: List users
      operationId: listUsers
      tags: [security-users]
      parameters:
        - $ref: "#/components/parameters/Page"
        - $ref: "#/components/parameters/PerPage"
      responses:
        "200":
          description: List of users

  /api/v1/admin/security/users/{id}:
    parameters:
      - $ref: "#/components/parameters/ResourceId"
    get:
      summary: Get user
      operationId: getUser
      tags: [security-users]
      responses:
        "200":
          description: User
        "404":
          $ref: "#/components/responses/NotFound"
    put:
      summary: Update user
      operationId: updateUser
      tags: [security-users]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateUserRequest"
      responses:
        "200":
          description: User updated
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      summary: Delete user
      operationId: deleteUser
      tags: [security-users]
      responses:
        "204":
          description: User deleted
        "404":
          $ref: "#/components/responses/NotFound"

  /api/v1/admin/security/users/{id}/permission-sets:
    parameters:
      - $ref: "#/components/parameters/ResourceId"
    post:
      summary: Assign permission set to user
      operationId: assignPermissionSet
      tags: [security-users]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [permission_set_id]
              properties:
                permission_set_id:
                  type: string
                  format: uuid
      responses:
        "204":
          description: Permission set assigned
        "400":
          $ref: "#/components/responses/BadRequest"
    get:
      summary: List permission sets assigned to user
      operationId: listUserPermissionSets
      tags: [security-users]
      responses:
        "200":
          description: List of assignments

  /api/v1/admin/security/users/{id}/permission-sets/{psId}:
    parameters:
      - $ref: "#/components/parameters/ResourceId"
      - name: psId
        in: path
        required: true
        schema:
          type: string
          format: uuid
    delete:
      summary: Revoke permission set from user
      operationId: revokePermissionSet
      tags: [security-users]
      responses:
        "204":
          description: Permission set revoked

  # --- Security: Object/Field Permissions ---

  /api/v1/admin/security/permission-sets/{id}/object-permissions:
    parameters:
      - $ref: "#/components/parameters/ResourceId"
    put:
      summary: Set object permission on permission set
      operationId: setObjectPermission
      tags: [security-permissions]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SetObjectPermissionRequest"
      responses:
        "200":
          description: Object permission set
        "400":
          $ref: "#/components/responses/BadRequest"
    get:
      summary: List object permissions for permission set
      operationId: listObjectPermissions
      tags: [security-permissions]
      responses:
        "200":
          description: List of object permissions

  /api/v1/admin/security/permission-sets/{id}/object-permissions/{objectId}:
    parameters:
      - $ref: "#/components/parameters/ResourceId"
      - $ref: "#/components/parameters/ObjectId"
    delete:
      summary: Remove object permission
      operationId: removeObjectPermission
      tags: [security-permissions]
      responses:
        "204":
          description: Object permission removed

  /api/v1/admin/security/permission-sets/{id}/field-permissions:
    parameters:
      - $ref: "#/components/parameters/ResourceId"
    put:
      summary: Set field permission on permission set
      operationId: setFieldPermission
      tags: [security-permissions]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SetFieldPermissionRequest"
      responses:
        "200":
          description: Field permission set
        "400":
          $ref: "#/components/responses/BadRequest"
    get:
      summary: List field permissions for permission set
      operationId: listFieldPermissions
      tags: [security-permissions]
      responses:
        "200":
          description: List of field permissions

  /api/v1/admin/security/permission-sets/{id}/field-permissions/{fieldId}:
    parameters:
      - $ref: "#/components/parameters/ResourceId"
      - $ref: "#/components/parameters/FieldId"
    delete:
      summary: Remove field permission
      operationId: removeFieldPermission
      tags: [security-permissions]
      responses:
        "204":
          description: Field permission removed

components:
  parameters:
    ObjectId:
      name: objectId
      in: path
      required: true
      schema:
        type: string
        format: uuid

    FieldId:
      name: fieldId
      in: path
      required: true
      schema:
        type: string
        format: uuid

    ResourceId:
      name: id
      in: path
      required: true
      schema:
        type: string
        format: uuid

    Page:
      name: page
      in: query
      schema:
        type: integer
        default: 1
        minimum: 1

    PerPage:
      name: per_page
      in: query
      schema:
        type: integer
        default: 20
        minimum: 1
        maximum: 100

  schemas:
    CreateObjectRequest:
      type: object
      required:
        - api_name
        - label
        - plural_label
        - object_type
      properties:
        api_name:
          type: string
          minLength: 2
          maxLength: 100
          example: Invoice__c
        label:
          type: string
          minLength: 1
          example: Invoice
        plural_label:
          type: string
          minLength: 1
          example: Invoices
        description:
          type: string
          default: ""
        object_type:
          type: string
          enum: [standard, custom]
        is_visible_in_setup:
          type: boolean
          default: true
        is_custom_fields_allowed:
          type: boolean
          default: true
        is_deleteable_object:
          type: boolean
          default: true
        is_createable:
          type: boolean
          default: true
        is_updateable:
          type: boolean
          default: true
        is_deleteable:
          type: boolean
          default: true
        is_queryable:
          type: boolean
          default: true
        is_searchable:
          type: boolean
          default: false
        has_activities:
          type: boolean
          default: false
        has_notes:
          type: boolean
          default: false
        has_history_tracking:
          type: boolean
          default: false
        has_sharing_rules:
          type: boolean
          default: false

    UpdateObjectRequest:
      type: object
      required:
        - label
        - plural_label
      properties:
        label:
          type: string
          minLength: 1
        plural_label:
          type: string
          minLength: 1
        description:
          type: string
        is_visible_in_setup:
          type: boolean
        is_custom_fields_allowed:
          type: boolean
        is_deleteable_object:
          type: boolean
        is_createable:
          type: boolean
        is_updateable:
          type: boolean
        is_deleteable:
          type: boolean
        is_queryable:
          type: boolean
        is_searchable:
          type: boolean
        has_activities:
          type: boolean
        has_notes:
          type: boolean
        has_history_tracking:
          type: boolean
        has_sharing_rules:
          type: boolean

    ObjectDefinition:
      type: object
      properties:
        id:
          type: string
          format: uuid
        api_name:
          type: string
        label:
          type: string
        plural_label:
          type: string
        description:
          type: string
        object_type:
          type: string
          enum: [standard, custom]
        is_platform_managed:
          type: boolean
        is_visible_in_setup:
          type: boolean
        is_custom_fields_allowed:
          type: boolean
        is_deleteable_object:
          type: boolean
        is_createable:
          type: boolean
        is_updateable:
          type: boolean
        is_deleteable:
          type: boolean
        is_queryable:
          type: boolean
        is_searchable:
          type: boolean
        has_activities:
          type: boolean
        has_notes:
          type: boolean
        has_history_tracking:
          type: boolean
        has_sharing_rules:
          type: boolean
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    ObjectResponse:
      type: object
      properties:
        data:
          $ref: "#/components/schemas/ObjectDefinition"

    ObjectListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/ObjectDefinition"
        pagination:
          $ref: "#/components/schemas/PaginationMeta"

    CreateFieldRequest:
      type: object
      required:
        - api_name
        - label
        - field_type
      properties:
        api_name:
          type: string
          minLength: 2
          maxLength: 100
        label:
          type: string
          minLength: 1
        description:
          type: string
          default: ""
        help_text:
          type: string
          default: ""
        field_type:
          type: string
          enum: [text, number, boolean, datetime, picklist, reference]
        field_subtype:
          type: string
          enum: [plain, area, rich, email, phone, url, integer, decimal, currency, percent, auto_number, date, datetime, time, single, multi, association, composition, polymorphic]
        referenced_object_id:
          type: string
          format: uuid
        is_required:
          type: boolean
          default: false
        is_unique:
          type: boolean
          default: false
        config:
          $ref: "#/components/schemas/FieldConfig"
        is_custom:
          type: boolean
          default: false
        sort_order:
          type: integer
          default: 0

    UpdateFieldRequest:
      type: object
      required:
        - label
      properties:
        label:
          type: string
          minLength: 1
        description:
          type: string
        help_text:
          type: string
        is_required:
          type: boolean
        is_unique:
          type: boolean
        config:
          $ref: "#/components/schemas/FieldConfig"
        sort_order:
          type: integer

    FieldConfig:
      type: object
      properties:
        max_length:
          type: integer
        precision:
          type: integer
        scale:
          type: integer
        format:
          type: string
        start_value:
          type: integer
        relationship_name:
          type: string
        on_delete:
          type: string
          enum: [set_null, cascade, restrict]
        is_reparentable:
          type: boolean
        default_value:
          type: string

    FieldDefinitionSchema:
      type: object
      properties:
        id:
          type: string
          format: uuid
        object_id:
          type: string
          format: uuid
        api_name:
          type: string
        label:
          type: string
        description:
          type: string
        help_text:
          type: string
        field_type:
          type: string
        field_subtype:
          type: string
        referenced_object_id:
          type: string
          format: uuid
        is_required:
          type: boolean
        is_unique:
          type: boolean
        config:
          $ref: "#/components/schemas/FieldConfig"
        is_system_field:
          type: boolean
        is_custom:
          type: boolean
        is_platform_managed:
          type: boolean
        sort_order:
          type: integer
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    FieldResponse:
      type: object
      properties:
        data:
          $ref: "#/components/schemas/FieldDefinitionSchema"

    FieldListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/FieldDefinitionSchema"

    PaginationMeta:
      type: object
      properties:
        page:
          type: integer
        per_page:
          type: integer
        total:
          type: integer
          format: int64
        total_pages:
          type: integer
          format: int64

    # --- Security schemas ---

    CreateRoleRequest:
      type: object
      required: [api_name, label]
      properties:
        api_name:
          type: string
          minLength: 2
          maxLength: 100
        label:
          type: string
        description:
          type: string
          default: ""
        parent_id:
          type: string
          format: uuid

    UpdateRoleRequest:
      type: object
      required: [label]
      properties:
        label:
          type: string
        description:
          type: string
        parent_id:
          type: string
          format: uuid

    CreatePermissionSetRequest:
      type: object
      required: [api_name, label, ps_type]
      properties:
        api_name:
          type: string
          minLength: 2
          maxLength: 100
        label:
          type: string
        description:
          type: string
          default: ""
        ps_type:
          type: string
          enum: [grant, deny]

    UpdatePermissionSetRequest:
      type: object
      required: [label]
      properties:
        label:
          type: string
        description:
          type: string

    CreateProfileRequest:
      type: object
      required: [api_name, label]
      properties:
        api_name:
          type: string
          minLength: 2
          maxLength: 100
        label:
          type: string
        description:
          type: string
          default: ""

    UpdateProfileRequest:
      type: object
      required: [label]
      properties:
        label:
          type: string
        description:
          type: string

    CreateUserRequest:
      type: object
      required: [username, email, profile_id]
      properties:
        username:
          type: string
          minLength: 1
          maxLength: 100
        email:
          type: string
          format: email
        first_name:
          type: string
          default: ""
        last_name:
          type: string
          default: ""
        profile_id:
          type: string
          format: uuid
        role_id:
          type: string
          format: uuid

    UpdateUserRequest:
      type: object
      required: [email, profile_id]
      properties:
        email:
          type: string
          format: email
        first_name:
          type: string
        last_name:
          type: string
        profile_id:
          type: string
          format: uuid
        role_id:
          type: string
          format: uuid
        is_active:
          type: boolean

    SetObjectPermissionRequest:
      type: object
      required: [object_id, permissions]
      properties:
        object_id:
          type: string
          format: uuid
        permissions:
          type: integer
          minimum: 0
          maximum: 15
          description: "Bitmask: Read=1, Create=2, Update=4, Delete=8"

    SetFieldPermissionRequest:
      type: object
      required: [field_id, permissions]
      properties:
        field_id:
          type: string
          format: uuid
        permissions:
          type: integer
          minimum: 0
          maximum: 3
          description: "Bitmask: Read=1, Write=2"

    DataResponse:
      type: object
      properties:
        data:
          type: object

    PaginatedDataResponse:
      type: object
      properties:
        data:
          type: array
          items:
            type: object
        pagination:
          $ref: "#/components/schemas/PaginationMeta"

    ErrorBody:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
        message:
          type: string

    ErrorResponse:
      type: object
      required:
        - error
      properties:
        error:
          $ref: "#/components/schemas/ErrorBody"

  responses:
    BadRequest:
      description: Validation error
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
    NotFound:
      description: Resource not found
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
    Forbidden:
      description: Action not permitted
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
    Conflict:
      description: Duplicate or conflict
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
    InternalError:
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
